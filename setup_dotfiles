#!/bin/bash

DOTFILES_DIR="$HOME/repos/dotfiles"
SCRIPT_DIR="$DOTFILES_DIR/scripts"

source "$SCRIPT_DIR/logs"
source "$SCRIPT_DIR/utils"

# Help option
if [[ "$1" == "--help" ]]; then
    echo "Usage: setup_dotfiles [--help]"
    echo "This script sets up the dotfiles by installing git submodules and running the setup script."
    echo "It also changes the default shell to zsh."
    exit 0
fi

# Install git submodules
git submodule update --init --recursive || error_exit "Failed to install git submodules."

source "$SCRIPT_DIR/setup"

# Change the default shell to zsh
chsh -s $(which zsh) || error_exit "Failed to change the default shell to zsh."